# Дизеринг

В этой задаче вам необходимо реализовать квантование изображения, используя несколько библиотек. Исходно задача звучит так:
есть обычное полноцветное изображение, необходимо преобразовать его в наиболее близкое к нему, но используя только заданные rgb-цвета.

Например, вот [обычное](https://disk.yandex.ru/i/axuDw8ruK96SmA) изображение, а вот
[оно же](https://disk.yandex.ru/i/rgLt-OcIsP6ExQ), сжатое до 16 цветов в Photoshop. Малое количество цветов позволяет
сильно сжимать изображение, например для 16 цветов достаточно 4 бит для кодирования одного пикселя. Мы, к сожалению, не достигнем таких
результатов, как это делает Photoshop, но получим неплохое приближение.

В данной задаче мы будем понимать под "ближайшим" пикселем к данному такой, евклидово расстояние до которого в RGB пространстве
минимально. В реальной жизни имеет смысл предварительно перевести все в специальное пространство, например
[LAB](https://en.wikipedia.org/wiki/Lab_color_space), т.к. близость в RGB весьма далека от человеческого восприятия близости цветов.

Для получения качественного результата необходимо использовать
[дизеринг](https://en.wikipedia.org/wiki/Dither), а именно в данной
задаче мы будем использовать [этот алгоритм](https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering).

Обратите внимание, что в данном алгоритме есть операция "найти ближайший пиксель к данному".
Если таковых много, то поиск ближайшего линейным перебором может быть неэффективным,
поэтому мы будем использовать kd-дерево для этих целей, реализация которого взята из
https://github.com/jlblancoc/nanoflann.
Для установки библиотеки выполните
```bash
$ sudo apt-get install libnanoflann-dev
```

Для чтения и записи изображений
используется <s>shit-</s>библиотека [libpng](http://www.libpng.org/pub/png/libpng.html)
(в этой задаче мы работаем только с png изображениями).
Для её установки в Ubuntu выполните
```bash
$ sudo apt-get install libpng-dev
```

Итак, реализуйте следующее компоненты:
* В файле `kd_tree.h` допишите реализацию класса `KdTree`, используя nanoflann. Подразумевается, что вектор точек, используемый при
построении дальше не изменяется, а метод поиска ближайшего возвращает индекс точки в этом векторе.
* В файле `dither.h` реализуйте функцию `Dither`, которая читает входное изображение, производит квантование, используя
переданные цвета, и записывает результат в выходное изображение. Используйте реализованные перед этим классы, а также дизеринг, описанный
в вики.
